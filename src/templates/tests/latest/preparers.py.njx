# --------------------------------------------------------------------------
# Copyright (c) Microsoft Corporation. All rights reserved.
# Licensed under the MIT License. See License.txt in the project root for
# license information.
#
# Code generated by Microsoft (R) AutoRest Code Generator.
# Changes may cause incorrect behavior and will be lost if the code is
# regenerated.
# --------------------------------------------------------------------------

from azure_devtools.scenario_tests import SingleValueReplacer
from azure.cli.testsdk.preparers import NoTrafficRecordingPreparer
from azure.cli.testsdk.reverse_dependency import get_dummy_cli
{% for preparerData in preparers %}

class {{preparerData.className}}(NoTrafficRecordingPreparer, SingleValueReplacer):
    def __init__(self,
                {%- for paramPair in preparerData.initParamPairs %}
                 {{paramPair[0]}}={{paramPair[1]}},
                {%- endfor %}
                 ):
        super({{preparerData.className}}, self).__init__(name_prefix, random_name_length)
        self.cli_ctx = get_dummy_cli()
        self.key = key
        {%- for attribute in preparerData.attributes %}
        self.{{attribute}} = {{attribute}}
        {%- endfor %}

    def create_resource(self, name, **_):
        cmd = '{{preparerData.createFunc.cmdTemplate}}'
        {% if preparerData.createFunc.cmdFormats.length > 0 -%}
        cmd = cmd.format({{preparerData.createFunc.cmdFormats|join(", ")}})
        {% endif -%}
        self.live_only_execute(self.cli_ctx, cmd)
        self.test_class_instance.kwargs[self.key] = name
        return {self.key: name}

    def remove_resource(self, name, **_):
        cmd = '{{preparerData.removeFunc.cmdTemplate}}'
        {% if preparerData.removeFunc.cmdFormats.length > 0 -%}
        cmd = cmd.format({{preparerData.removeFunc.cmdFormats|join(", ")}})
        {% endif -%}
        self.live_only_execute(self.cli_ctx, cmd)
{% endfor -%}